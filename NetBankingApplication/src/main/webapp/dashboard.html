<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" type="text/css" href="dashboard.css">
</head>
<body>
    <div class="headerPart">
    			<a href="/NetBankingApplication/dashboard" id="homePage">Home</a>  		
    			<div class="nav-container" id="nav-account">
    				<span>My Accounts</span>
    				<div class="nav-menu" id="account-menu">
    				<img src="images/account.jpeg"/>
    				<ul>
    					<li>
    						<a href="account.html">Account Details</a>    				
    					</li>
    					<li>
    						<a>Recent Transactions</a>    				
    					</li>
    				</ul>
    				</div>
    			</div>  
				<div class="nav-container" id="nav-payment">
					<span>Make Payments</span>
					<div class="nav-menu" id="payment-menu">
					<img src="images/Money-transfer.jpg"/>
    				<ul>
						<li>
							<a>Money Transfer</a>					
						</li>
						<li>
							<a>Credit Card Bill Payment</a>					
						</li>
						<li>
							<a>Bills Payment and Recharges</a>					
						</li>
						<li>
							<a>FastTag Payment</a>					
						</li>
					</ul>
    				</div>
				</div>
    </div>
	<div id="headerStyle">
	</div>
	<div class="header">
    <img src="images/logoCircle.png" alt="MAIN Bank Logo" class="logo"> <!-- Replace with your actual logo image path -->    
    <p id="greeting">Hello, user!</p>
    <p class="greetingLine2">Welcome to your Dashboard.</p>
    </div>
    <div id="profile-container">
    <img src="images/profile.png" alt="Profile" id="profile-icon"> <!-- Replace with your profile icon path -->
    <div id="profile-menu">
        <ul>
            <li>
            	<a href="profile.html">
            	<img src="images/edit.png" alt="profile" class="profile-menu-icon">
           	 	<span class="menuNames">View / Edit Profile</span>
            	</a>
            </li>
            <li>
            <a href="/NetBankingApplication/logout" onclick="clearSessionAttributes()">
            	<img src="images/logout.svg" alt="logout" class="profile-menu-icon">
            	<span class="menuNames">Log Out</span>
            </a>
            </li>
        </ul>
    </div>
	</div>
    
	
	<div id="footer">
    <a href="" class="links">Disclaimer</a>
    <a href="" class="links">Terms and Conditions</a>
    <a href="" class="links">Privacy Policy</a>
    <a href="" class="links">Code of Commitment</a>
    <span id="cr">Copyright &copy; 2024 Main Bank. All rights reserved</span>
    </div>

	
	<script>	
	function fetchUserDetails() {
	    fetch('/NetBankingApplication/fetch')
	        .then(response => response.json())
	        .then(data => {
	            const greetingElement = document.getElementById("greeting");

	            if (data.error) {
	                greetingElement.textContent = `Error: ${data.error}`; // Handle the error case
	            } else {
	                greetingElement.textContent = `Hello, ${data.name}!`;
	            }
	        })
	        .catch(error => {
	            console.error("Error fetching user details:", error);
	            document.getElementById("greeting").textContent = "Error loading user details.";
	        });
	}

		
        function clearSessionAttributes() 
        {
            // Clear session data on logout
            localStorage.removeItem("userName");
            localStorage.removeItem("sessionToken");
            alert("You have been logged out successfully!");
            
            window.location.href = "/NetBankingApplication/logout";
        }

        
        window.onload = fetchUserDetails;
    </script>
</body>

</html>
